(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e0be85a"],{"1d19":function(t,e,a){},"2d56":function(t,e,a){},"317c":function(t,e,a){"use strict";a("2d56")},"408a":function(t,e,a){var s=a("e330");t.exports=s(1..valueOf)},"4fd5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-sheet-detail"},[s("div",{staticClass:"sheet-img-wrap"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:{src:t.playListDetail.coverImgUrl+"?param=208y208",error:a("7bdd"),loading:a("7bdd")},expression:"{\n        src: playListDetail.coverImgUrl + '?param=208y208',\n        error: require('@/assets/img/歌单.png'),\n        loading: require('@/assets/img/歌单.png')\n      }"}],staticClass:"sheet-img",attrs:{alt:""}})]),s("div",{staticClass:"sheet-info-wrap"},[s("div",{staticClass:"title"},[s("i",{staticClass:"iconfont icon-gedan"},[t._v(t._s(t.playListType))]),s("h2",[t._v(t._s(t.playListDetail.name))])]),"专辑"!=t.playListType&&t.playListDetail.creator?s("div",{staticClass:"user"},[s("img",{attrs:{src:t.playListDetail.creator.avatarUrl+"?param=208y208",alt:""}}),s("router-link",{staticStyle:{color:"#0c73c2"},attrs:{to:"/user/home?id="+t.playListDetail.creator.userId}},[t._v(t._s(t.playListDetail.creator.nickname))]),s("span",[t._v(t._s(t.moment(parseInt(t.playListDetail.createTime)).format("YYYY-MM-DD")+("歌单"==t.playListType?" 创建":" 发布"))+" ")])],1):s("div",[t._v(" 歌手："),t._l(t.playListDetail.artists,(function(e,a){return s("router-link",{key:e.id,staticStyle:{color:"#0c73c2"},attrs:{to:"/singer?id="+e.id}},[t._v(t._s(0!=a?" / ":"")+t._s(e.name))])})),s("span",{staticStyle:{"margin-left":"8px"}},[t._v(t._s(t.moment(parseInt(t.playListDetail.createTime)).format("YYYY-MM-DD")+("歌单"==t.playListType?" 创建":" 发布"))+" ")])],2),s("div",{staticClass:"operation"},[s("a",{staticClass:"bofang-all",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.preventDefault(),t.bofangALL.apply(null,arguments)}}},[s("i",{staticClass:"iconfont icon-bofang"}),t._v(" 播放全部 ")]),s("a",{staticClass:"add-all",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.preventDefault(),t.addALL.apply(null,arguments)}}},[s("i",{staticClass:"iconfont icon-tianjia"})]),s("a",{staticClass:"collect",style:t.playListDetail.subscribed?"background-color:rgb(231,231,231)":"",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.preventDefault(),t.collectClicked.apply(null,arguments)}}},[s("i",{staticClass:"iconfont icon-shoucang"}),t._v(" "+t._s(t.playListDetail.subscribed?"已收藏":"收藏")+" "),t.playListDetail.subscribedCount?s("span",[t._v("("+t._s(t.playListDetail.subscribedCount)+")")]):t._e()]),t._m(0),t._m(1)]),t.playListDetail.tags&&t.playListDetail.tags.length?s("div",{staticClass:"tags"},[s("span",[t._v(" 标签： ")]),t._l(t.playListDetail.tags,(function(e){return s("router-link",{key:e,attrs:{to:"/discoverplaylist?cat="+e}},[t._v(t._s(e))])}))],2):t._e(),t.playListDetail.company?s("div",[s("span",[t._v(" 发行公司："+t._s(t.playListDetail.company)+" ")])]):t._e(),s("div",{staticClass:"count"},[s("span",[t._v(" 歌曲："+t._s(t.playListDetail.trackCount)+" 首 ")]),t.playListDetail.playCount?s("span",[t._v(" 播放："+t._s(t.parseCount(t.playListDetail.playCount))+"次 ")]):t._e()])]),t.playListDetail.description?s("div",{staticClass:"desc"},[s("p",[t._v(" 介绍： "+t._s(t.playListDetail.description)+" ")])]):t._e()])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"install-all",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"iconfont icon-xiazai"}),t._v(" 下载全部 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"comment",attrs:{href:""}},[a("i",{staticClass:"iconfont icon-pinglun"}),t._v(" 评论 ")])}],n=a("5530"),o=(a("b0c0"),a("a4d3"),a("e01a"),a("2f62")),c=a("365c"),r={name:"",components:{},data:function(){return{}},props:{playListDetail:{type:Object,required:!0},playListType:{type:String,default:"歌单"},songs:{type:Array,required:!0},isMeCreated:{type:Boolean,default:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(o["d"])("CreateSheetModule",["create"])),Object(o["d"])("UserModule",["userInfo"])),watch:{"create.isOver":function(){this.create.isOver&&this.isMeCreated&&2==this.create.model&&(console.log(this.create.model,this.create.playlist),this.playListDetail.name=this.create.playlist.name,this.playListDetail.description=this.create.playlist.desc,this.playListDetail.tags=this.create.playlist.tags)}},inject:{emitUpdateSubPlaylist:{from:"emitUpdateSubPlaylist",default:null}},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])("PlayerModule",["cutSongSheet","asyncUpdateIsLock","addNextSong"])),{},{bofangALL:function(){this.cutSongSheet({songs:this.songs,currentIndex:0}),this.asyncUpdateIsLock({isLock:!0})},addALL:function(){this.addNextSong({songs:this.songs})},collectClicked:function(){var t=this;this.playListDetail.subscribed?c["c"].collectPlayList(this.playListDetail.id,2).then((function(e){t.playListDetail.subscribed=!1,t.playListDetail.subscribedCount-=1,t.$message({message:"取消收藏",type:"success",duration:1e3}),t.emitUpdateSubPlaylist&&t.emitUpdateSubPlaylist(t.playListDetail,"delete")})):c["c"].collectPlayList(this.playListDetail.id,1).then((function(e){t.playListDetail.subscribed=!0,t.playListDetail.subscribedCount+=1,t.$message({message:"已收藏",type:"success",duration:1e3}),t.emitUpdateSubPlaylist&&t.emitUpdateSubPlaylist(t.playListDetail,"add")})).catch((function(e){t.$message({message:"此歌单无法收藏",type:"warning",duration:1500})})),this.catchStorage.removeCatchItem("userPlayList:".concat(this.userInfo.userId)),this.catchStorage.removeCatchItem("userSubcount:".concat(this.userInfo.userId))}}),beforeCreated:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},deactivated:function(){}},l=r,u=(a("317c"),a("2877")),d=Object(u["a"])(l,s,i,!1,null,"50fe8d51",null);e["a"]=d.exports},"7bdd":function(t,e,a){t.exports=a.p+"img/歌单.ff022558.png"},a9e3:function(t,e,a){"use strict";var s=a("83ab"),i=a("da84"),n=a("e330"),o=a("94ca"),c=a("6eeb"),r=a("1a2d"),l=a("7156"),u=a("3a9b"),d=a("d9b5"),f=a("c04e"),p=a("d039"),h=a("241c").f,y=a("06cf").f,m=a("9bf2").f,g=a("408a"),v=a("58a8").trim,b="Number",_=i[b],C=_.prototype,L=i.TypeError,I=n("".slice),S=n("".charCodeAt),w=function(t){var e=f(t,"number");return"bigint"==typeof e?e:k(e)},k=function(t){var e,a,s,i,n,o,c,r,l=f(t,"number");if(d(l))throw L("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=v(l),e=S(l,0),43===e||45===e){if(a=S(l,2),88===a||120===a)return NaN}else if(48===e){switch(S(l,1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+l}for(n=I(l,2),o=n.length,c=0;c<o;c++)if(r=S(n,c),r<48||r>i)return NaN;return parseInt(n,s)}return+l};if(o(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var D,x=function(t){var e=arguments.length<1?0:_(w(t)),a=this;return u(C,a)&&p((function(){g(a)}))?l(Object(e),a,x):e},N=s?h(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),j=0;N.length>j;j++)r(_,D=N[j])&&!r(x,D)&&m(x,D,y(_,D));x.prototype=C,C.constructor=x,c(i,b,x)}},aad1:function(t,e,a){"use strict";a("1d19")},acc7:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"song-sheet"},[a("div",{staticClass:"s-top"},[a("h3",[t._v("歌曲列表")]),a("span",[t._v(t._s(t.trackCount)+"首歌")]),t.playCount?a("div",[t._v(" 播放: "),a("strong",[t._v(t._s(t.playCount))]),t._v(" 次 ")]):t._e()]),a("div",{staticClass:"sheet-table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:0==t.songs.length,expression:"songs.length == 0"}],ref:"sheettable",staticStyle:{width:"100%"},attrs:{data:t.songs,"element-loading-text":"拼命加载中",stripe:""},on:{"row-click":t.rowClick}},[a("el-table-column",{attrs:{label:"操作",width:t.c1},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operation"},[a("span",[t._v(" "+t._s(e.$index+1))]),a("i",{staticClass:"iconfont icon-bofang",attrs:{title:"播放"},on:{click:function(a){return a.stopPropagation(),t.btnBf(e.$index)}}}),a("i",{staticClass:"iconfont icon-xiazai"})])]}}])}),a("el-table-column",{attrs:{label:"歌曲标题","show-overflow-tooltip":"",width:t.c2},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" "),e.row.mv?a("a",{staticStyle:{"font-size":"18px",position:"relative",top:"1px",color:"rgb(236, 65, 65)"},attrs:{href:"javascript:void(0)"},on:{click:function(a){return a.preventDefault(),t.gotoMv(e.row.mv)}}},[a("i",{staticClass:"iconfont icon-MV"})]):t._e()]}}])}),a("el-table-column",{attrs:{label:"时间",width:t.c3},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatTime(e.row.dt/1e3))+" ")]}}])}),a("el-table-column",{attrs:{label:"歌手",width:t.c4,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ar?a("div",t._l(e.row.ar,(function(e,s){return a("router-link",{key:e.id+s,attrs:{to:"/singer?id="+e.id}},[t._v(" "+t._s(0!=s?"|":"")+" "+t._s(e.name)+" ")])})),1):t._e()]}}])}),a("el-table-column",{attrs:{label:"专辑",width:t.c5,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/album?id="+e.row.al.id}},[t._v(" "+t._s(e.row.al.name)+" ")])]}}])}),t.c6IsShow?a("el-table-column",{attrs:{label:"次数",width:160,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e.row.recordPlayCount)+" ")])]}}],null,!1,4166948044)}):t._e()],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.menuIsShow,expression:"menuIsShow"}],ref:"menu",staticClass:"menu"},[a("ul",[a("li",{on:{click:t.bofang}},[a("i",{staticClass:"iconfont icon-bofang"}),t._v(" 立即播放 ")]),a("li",{staticClass:"next-bofang",on:{click:t.nextBofang}},[a("i",{staticClass:"iconfont icon-bofang1"}),t._v(" 下一首播放 ")]),a("li",{on:{click:t.collectSongClicked}},[a("i",{staticClass:"iconfont icon-shoucang"}),t._v(" 收藏到歌单 ")]),t._m(0),t.isMeCreated?a("li",{on:{click:t.deleteSong}},[a("i",{staticClass:"iconfont icon-shanchu"}),t._v(" 从歌单中移除 ")]):t._e()])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("i",{staticClass:"iconfont icon-lianjie"}),t._v(" 复制链接 ")])}],n=a("5530"),o=(a("a9e3"),a("b0c0"),a("2f62")),c=a("fedc"),r=a("365c"),l={name:"",components:{},data:function(){return{menuIsShow:!1,currentIndex:-1}},props:{songs:{type:Array,required:!0},playCount:{type:Number},trackCount:{type:Number},isMeCreated:{type:Boolean,default:!1},c1:{type:Number,default:120},c2:{type:Number,default:188},c3:{type:Number,default:80},c4:{type:Number,default:150},c5:{type:Number,default:110},c6IsShow:{type:Boolean,default:!1}},computed:{},watch:{},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])("PlayerModule",["pause"])),Object(o["b"])("PlayerModule",["cutSongSheet","asyncUpdateIsLock","addNextSong","asyncUpdateIsLock"])),Object(o["b"])("CollectModule",["collectClicked"])),{},{rowClick:function(t,e,a){var s=a.clientX,i=a.clientY,n=this.$refs.menu;n.style.top=i+10+"px",n.style.left=s+"px",this.menuIsShow=!0;var o=this.getCurrentIndex(t,this.songs);this.currentIndex=o,console.log("rowClick",o)},NonTargetIsClicked:function(t){if(this.menuIsShow){var e=t.target,a=this.$refs.menu,s=document.getElementsByTagName("table")[1],i=Object(c["a"])(e,a,s);i||(this.menuIsShow=!1,this.currentIndex=-1)}},getCurrentIndex:function(t,e){var a=0;while(a<e.length){if(e[a].id==t.id)return a;a++}return-1},btnBf:function(t){this.currentIndex=t,this.bofang()},bofang:function(){this.cutSongSheet({songs:this.songs,currentIndex:this.currentIndex}),this.asyncUpdateIsLock({isLock:!0}),this.menuIsShow=!1,this.currentIndex=-1},nextBofang:function(){var t=this.songs[this.currentIndex];console.log(t),this.addNextSong({songs:[t]}),this.menuIsShow=!1,this.currentIndex=-1},bofangALL:function(){},gotoMv:function(t){console.log(t),this.pause(),this.$router.push({path:"/mv?id=".concat(t)}),this.asyncUpdateIsLock({isLock:!1})},collectSongClicked:function(){var t=this.songs[this.currentIndex];this.collectClicked({tracks:[t.id]}),this.menuIsShow=!1},deleteSong:function(){var t=this,e=this.songs[this.currentIndex],a=this.currentIndex;console.log(e),this.$confirm("确定从歌单中删除歌曲 《".concat(e.name,"》 ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r["c"].addOrDeleteSong({op:"del",pid:t.$route.query.id,tracks:e.id}).then((function(e){t.$emit("emitDeleteCreatedPlaylistSong",a),t.menuIsShow=!1,t.$message({type:"success",message:"删除成功!"}),t.catchStorage.removeCatchItem("playlistDetail:".concat(t.$route.query.id)),t.catchStorage.removeCatchItem("playlistSongs:".concat(t.$route.query.id))}))})).catch((function(){}))}}),beforeCreated:function(){},created:function(){document.addEventListener("click",this.NonTargetIsClicked)},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){document.removeEventListener("click",this.NonTargetIsClicked)},destroyed:function(){},activated:function(){},deactivated:function(){}},u=l,d=(a("aad1"),a("2877")),f=Object(d["a"])(u,s,i,!1,null,"d3415a1c",null);e["a"]=f.exports},fedc:function(t,e,a){"use strict";e["a"]=function(t,e,a){return e.contains(t)||a.contains(t)}}}]);
//# sourceMappingURL=chunk-1e0be85a.928ba7c1.js.map