(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e6d6021"],{"03cd":function(t,e,a){},"316d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mymusic-box"},[s("div",{staticClass:"mymusic-wrap"},[s("div",{staticClass:"left-wrap"},[s("div",[s("router-link",{attrs:{to:"/mymusic/myartist",tag:"h2"}},[t._v(" 我的歌手("+t._s(t.subCount.artistCount)+") ")]),s("router-link",{attrs:{to:"/mymusic/mymv",tag:"h2"}},[t._v(" 我的mv("+t._s(t.subCount.mvCount)+") ")]),s("div",{staticClass:"myplaylist-wrap"},[s("h2",[t._v(" 创建的歌单("+t._s(t.subCount.createdPlaylistCount)+") "),s("i",{staticClass:"iconfont icon-tianjia",staticStyle:{float:"right","margin-right":"10px","font-size":"24px"},attrs:{title:"新建歌单"},on:{click:function(e){return t.asyncupdateCreateBoxIsShow({isShow:!0})}}})]),s("ul",t._l(t.CreatedPlaylist,(function(e,a){return s("router-link",{key:e.id,staticClass:"CreatedPlaylist-li",attrs:{to:"/mymusic/myplaylist?id="+e.id,tag:"li",exact:""}},[s("img",{attrs:{src:e.coverImgUrl+"?param=40y40",alt:""}}),t._v(" "+t._s(e.name)+" "),0!=a?s("span",{staticClass:"tool"},[s("i",{staticClass:"iconfont icon-xiugai",attrs:{title:"编辑"},on:{click:function(a){return a.stopPropagation(),t.updatePlaylist(e)}}}),s("i",{staticClass:"iconfont icon-shanchu",attrs:{title:"删除"},on:{click:function(s){return s.stopPropagation(),t.deletePlaylist(e,a)}}})]):t._e()])})),1)]),s("div",{staticClass:"myplaylist-wrap"},[s("h2",[t._v("收藏的歌单("+t._s(t.subCount.subPlaylistCount)+")")]),s("ul",t._l(t.SubPlaylist,(function(e){return s("router-link",{key:e.id,attrs:{to:"/mymusic/myplaylist?id="+e.id,tag:"li",exact:""}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:{src:e.coverImgUrl+"?param=40y40",error:a("7bdd"),loading:a("7bdd")},expression:"{\n                  src: item.coverImgUrl + '?param=40y40',\n                  error: require('@/assets/img/歌单.png'),\n                  loading: require('@/assets/img/歌单.png')\n                }"}],attrs:{alt:""}}),t._v(" "+t._s(e.name)+" ")])})),1)])],1)]),s("div",{staticStyle:{height:"1px",width:"240px"}}),s("div",{staticClass:"right-wrap",staticStyle:{"min-height":"960px"}},[s("router-view",{attrs:{CreatedPlaylistIds:t.CreatedPlaylistIds}})],1)])])},i=[],n=a("1da1"),l=a("5530"),r=(a("96cf"),a("a434"),a("b0c0"),a("a4d3"),a("e01a"),a("fb6a"),a("d3b7"),a("159b"),a("2f62")),o=a("365c"),c={name:"",components:{},data:function(){return{subCount:{artistCount:0,mvCount:0,createdPlaylistCount:0,subPlaylistCount:0},CreatedPlaylist:[],CreatedPlaylistIds:[],SubPlaylist:[]}},props:{},computed:Object(l["a"])(Object(l["a"])({},Object(r["d"])("UserModule",["userInfo"])),Object(r["d"])("CreateSheetModule",["create"])),watch:{"create.isOver":function(){if(this.create.isOver)if(1==this.create.model)console.log(this.create.model,this.create.playlist),this.CreatedPlaylist.splice(1,0,this.create.playlist),this.CreatedPlaylistIds.splice(1,0,this.create.playlist.id),this.subCount.createdPlaylistCount+=1;else{console.log(this.create.model,this.create.playlist);for(var t=0;t<this.CreatedPlaylist.length;t++)if(this.create.playlist.id==this.CreatedPlaylist[t].id){this.CreatedPlaylist[t].name=this.create.playlist.name,this.CreatedPlaylist[t].tags=this.create.playlist.tags,this.CreatedPlaylist[t].description=this.create.playlist.desc;break}}}},provide:function(){var t=this;return{emitUpdateSubPlaylist:function(e,a){if("add"==a)console.log("add"),t.SubPlaylist.unshift(e),t.subCount.subPlaylistCount+=1;else if("delete"==a){console.log("delete");for(var s=0;s<t.SubPlaylist.length;s++)if(t.SubPlaylist[s].id==e.id){t.SubPlaylist.splice(s,1),t.subCount.subPlaylistCount-=1;break}console.log(t.SubPlaylist)}}}},methods:Object(l["a"])(Object(l["a"])({},Object(r["b"])("CreateSheetModule",["asyncupdateCreateBoxIsShow"])),{},{initPlaylist:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.catchStorage.getCatchItem("userPlayList:".concat(t.userInfo.userId)),console.log(a),a){e.next=8;break}return e.next=5,o["c"].getUserPlayList(t.userInfo.userId);case 5:s=e.sent,a=s.playlist,t.catchStorage.setCatchItem("userPlayList:".concat(t.userInfo.userId),a,60);case 8:t.CreatedPlaylist=a.slice(0,t.subCount.createdPlaylistCount),t.CreatedPlaylist.forEach((function(e){t.CreatedPlaylistIds.push(e.id)})),t.SubPlaylist=a.slice(t.subCount.createdPlaylistCount,a.length),"/mymusic"==t.$route.fullPath&&t.$router.push("/mymusic/myplaylist?id=".concat(t.CreatedPlaylist[0].id));case 12:case"end":return e.stop()}}),e)})))()},updatePlaylist:function(t){this.asyncupdateCreateBoxIsShow({isShow:!0,model:2,playlist:{id:t.id,name:t.name,desc:t.description,tags:t.tags}})},deletePlaylist:function(t,e){var a=this;console.log(e),this.$confirm("确定删除歌单 《".concat(t.name,"》 ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("确定删除"),o["c"].deletePlaylist(t.id).then((function(s){console.log(s),a.$message({type:"success",message:"删除成功!"}),console.log(e),a.CreatedPlaylist.splice(e,1),a.CreatedPlaylistIds.splice(e,1),a.subCount.createdPlaylistCount-=1,a.catchStorage.removeCatchItem("userPlayList:".concat(a.userInfo.userId)),a.catchStorage.removeCatchItem("userSubcount:".concat(a.userInfo.userId)),a.catchStorage.removeCatchItem("playlistDetail:".concat(t.id)),a.catchStorage.removeCatchItem("playlistSongs:".concat(t.id))})).catch((function(t){}))})).catch((function(){console.log("取消删除")}))}}),beforeCreated:function(){},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s,i,n,l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.catchStorage.getCatchItem("userSubcount:".concat(t.userInfo.userId)),a){e.next=6;break}return e.next=4,o["h"].getUserSubcount();case 4:a=e.sent,t.catchStorage.setCatchItem("userSubcount:".concat(t.userInfo.userId),a,3);case 6:s=a,i=s.mvCount,n=s.artistCount,l=s.createdPlaylistCount,r=s.subPlaylistCount,t.subCount.mvCount=i,t.subCount.artistCount=n,t.subCount.createdPlaylistCount=l,t.subCount.subPlaylistCount=r,t.initPlaylist();case 12:case"end":return e.stop()}}),e)})))()},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},deactivated:function(){}},u=c,d=(a("6a52"),a("2877")),y=Object(d["a"])(u,s,i,!1,null,"5f240fb2",null);e["default"]=y.exports},"6a52":function(t,e,a){"use strict";a("03cd")},"7bdd":function(t,e,a){t.exports=a.p+"img/歌单.ff022558.png"}}]);
//# sourceMappingURL=chunk-3e6d6021.877517eb.js.map