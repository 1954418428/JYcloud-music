{"version":3,"sources":["webpack:///./src/views/song/discoverPlayList.vue?6b03","webpack:///./src/assets/img/歌单.png","webpack:///./src/components/song/SongSheetItem.vue?e4a2","webpack:///src/components/song/SongSheetItem.vue","webpack:///./src/components/song/SongSheetItem.vue?d5ba","webpack:///./src/components/song/SongSheetItem.vue","webpack:///./src/components/song/SongSheetItem.vue?9f13","webpack:///./src/views/song/discoverPlayList.vue?919a","webpack:///src/views/song/discoverPlayList.vue","webpack:///./src/views/song/discoverPlayList.vue?feae","webpack:///./src/views/song/discoverPlayList.vue","webpack:///./src/utils/closeTargetEle.js"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","bofangBtnIsShow","attrs","songSheetItem","directives","name","rawName","value","src","picUrl","coverImgUrl","error","loading","expression","_v","_s","creator","nickname","_e","parseCount","playCount","staticRenderFns","components","data","props","type","Object","required","computed","watch","methods","beforeCreated","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","component","page","cat","ref","categorysIsShow","_l","item","key","id","class","iconClass","sub","playList","more","staticStyle","scrollBottom","isLoading","currentIndex","order","limit","offset","hotPlayList","playListCatlist","deep","immediate","scrollHandler","NonTargetIsClicked","flag","document","removeEventListener","window","target","showTargetEle","triggerTargetEle","contains"],"mappings":"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","file":"js/chunk-7908f210.cd748f52.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./discoverPlayList.vue?vue&type=style&index=0&id=f6bd99d8&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/歌单.ff022558.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song-sheet-item-box\",on:{\"mouseover\":function($event){_vm.bofangBtnIsShow = true},\"mouseleave\":function($event){_vm.bofangBtnIsShow = false}}},[_c('router-link',{staticClass:\"img-a\",attrs:{\"to\":(\"/playlist?id=\" + (_vm.songSheetItem.id))}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:({\n        src:\n          (_vm.songSheetItem.picUrl || _vm.songSheetItem.coverImgUrl) +\n          '?param=160y160',\n        error: require('@/assets/img/歌单.png'),\n        loading: require('@/assets/img/歌单.png')\n      }),expression:\"{\\n        src:\\n          (songSheetItem.picUrl || songSheetItem.coverImgUrl) +\\n          '?param=160y160',\\n        error: require('@/assets/img/歌单.png'),\\n        loading: require('@/assets/img/歌单.png')\\n      }\"}],staticClass:\"song-sheet-img\",attrs:{\"alt\":\"\"}}),_c('router-link',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.bofangBtnIsShow),expression:\"bofangBtnIsShow\"}],staticClass:\"bofang-btn\",attrs:{\"to\":(\"/playlist?id=\" + (_vm.songSheetItem.id))},on:{\"mouseover\":function($event){_vm.bofangBtnIsShow = true},\"mouseleave\":function($event){_vm.bofangBtnIsShow = false}}},[_c('i',{staticClass:\"iconfont icon-bofang\"})])],1),_c('div',{staticClass:\"song-sheet-name\"},[_c('router-link',{attrs:{\"to\":(\"/playlist?id=\" + (_vm.songSheetItem.id))}},[_vm._v(\" \"+_vm._s(_vm.songSheetItem.name)+\" \")]),(_vm.songSheetItem.creator)?_c('router-link',{attrs:{\"to\":\"/singer\"}},[_vm._v(\" by \"+_vm._s(_vm.songSheetItem.creator.nickname)+\" \")]):_vm._e()],1),_c('span',{staticClass:\"song-sheet-play-count\"},[_c('i',{staticClass:\"iconfont icon-bofang\"}),_vm._v(\" \"+_vm._s(_vm.parseCount(this.songSheetItem.playCount))+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 歌单入口 -->\r\n  <div\r\n    class=\"song-sheet-item-box\"\r\n    @mouseover=\"bofangBtnIsShow = true\"\r\n    @mouseleave=\"bofangBtnIsShow = false\"\r\n  >\r\n    <router-link :to=\"`/playlist?id=${songSheetItem.id}`\" class=\"img-a\">\r\n      <img\r\n        v-lazy=\"{\r\n          src:\r\n            (songSheetItem.picUrl || songSheetItem.coverImgUrl) +\r\n            '?param=160y160',\r\n          error: require('@/assets/img/歌单.png'),\r\n          loading: require('@/assets/img/歌单.png')\r\n        }\"\r\n        alt=\"\"\r\n        class=\"song-sheet-img\"\r\n      />\r\n\r\n      <router-link\r\n        :to=\"`/playlist?id=${songSheetItem.id}`\"\r\n        class=\"bofang-btn\"\r\n        v-show=\"bofangBtnIsShow\"\r\n        @mouseover=\"bofangBtnIsShow = true\"\r\n        @mouseleave=\"bofangBtnIsShow = false\"\r\n      >\r\n        <i class=\"iconfont icon-bofang\"> </i>\r\n      </router-link>\r\n    </router-link>\r\n\r\n    <div class=\"song-sheet-name\">\r\n      <router-link :to=\"`/playlist?id=${songSheetItem.id}`\">\r\n        {{ songSheetItem.name }}\r\n      </router-link>\r\n      <router-link :to=\"`/singer`\" v-if=\"songSheetItem.creator\">\r\n        by {{ songSheetItem.creator.nickname }}\r\n      </router-link>\r\n    </div>\r\n\r\n    <span class=\"song-sheet-play-count\">\r\n      <i class=\"iconfont icon-bofang\"> </i>\r\n      {{ parseCount(this.songSheetItem.playCount) }}\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      bofangBtnIsShow: false\r\n    };\r\n  },\r\n  props: {\r\n    songSheetItem: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  methods: {},\r\n  beforeCreated() {},\r\n  async created() {\r\n    // const id = this.songSheetItem.id;\r\n    // const playListDetail = await  sheetApi.getPlayListDetail(id);\r\n    // console.log(playListDetail);\r\n  },\r\n  beforeMount() {},\r\n  mounted() {},\r\n  beforeUpdate() {},\r\n  updated() {},\r\n  beforeDestroy() {},\r\n  destroyed() {},\r\n  //被keep-alive缓存的组件激活时调用\r\n  activated() {},\r\n  deactivated() {}\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.song-sheet-item-box {\r\n  width: 160px;\r\n  position: relative;\r\n  .img-a {\r\n    height: 160px;\r\n    display: inline-block;\r\n    position: relative;\r\n    .song-sheet-img {\r\n      width: 160px;\r\n      height: 160px;\r\n      border-radius: 10px;\r\n    }\r\n    .bofang-btn {\r\n      position: absolute;\r\n      bottom: 5px;\r\n      right: 5px;\r\n      i {\r\n        font-size: 36px;\r\n        background-color: white;\r\n        border-radius: 36px;\r\n        color: rgb(236, 65, 65);\r\n      }\r\n    }\r\n  }\r\n\r\n  .song-sheet-name {\r\n    padding: 6px 0;\r\n    a {\r\n      color: #666;\r\n      display: block;\r\n      margin-bottom: 4px;\r\n      &:hover {\r\n        color: #333;\r\n      }\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      display: -webkit-box;\r\n      -webkit-line-clamp: 2;\r\n      -webkit-box-orient: vertical;\r\n    }\r\n  }\r\n  .song-sheet-play-count {\r\n    background-color: rgba($color: #000000, $alpha: 0.2);\r\n    padding: 2px;\r\n    border-radius: 6px;\r\n    i {\r\n      position: relative;\r\n      top: 1px;\r\n      left: 1px;\r\n    }\r\n    position: absolute;\r\n    top: 5px;\r\n    right: 5px;\r\n    color: white;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SongSheetItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SongSheetItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SongSheetItem.vue?vue&type=template&id=609d82e6&scoped=true&\"\nimport script from \"./SongSheetItem.vue?vue&type=script&lang=js&\"\nexport * from \"./SongSheetItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SongSheetItem.vue?vue&type=style&index=0&id=609d82e6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"609d82e6\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SongSheetItem.vue?vue&type=style&index=0&id=609d82e6&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"discoverplaylist-box\"},[_c('div',{staticClass:\"discoverplaylist-wrap\"},[_c('div',{staticClass:\"head\"},[_c('h3',[_vm._v(\" \"+_vm._s(_vm.page.cat)+\" \"),_c('a',{ref:\"choose\",staticClass:\"choose\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){_vm.categorysIsShow = !_vm.categorysIsShow}}},[_vm._v(\" 选择分类 \"),_c('i',{staticClass:\"iconfont icon-xiangxiajiantou\"})])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.categorysIsShow),expression:\"categorysIsShow\"}],ref:\"categorys\",staticClass:\"categorys\"},[_c('div',{staticClass:\"all\"},[_c('router-link',{attrs:{\"to\":\"/discoverplaylist?cat=全部\"}},[_vm._v(\" 全部风格 \")])],1),_c('div',{staticClass:\"c-list\"},_vm._l((_vm.playListCatlist),function(item){return _c('div',{key:item.id,staticClass:\"categorys-wrap\"},[_c('div',{staticClass:\"category-item\"},[_c('i',{class:item.iconClass}),_c('span',[_vm._v(\" \"+_vm._s(item.name)+\" \")])]),_c('ul',{staticClass:\"tags-wrap\"},_vm._l((item.subs),function(sub){return _c('li',{key:sub.name,staticClass:\"tag-item\"},[_c('router-link',{class:_vm.page.cat == sub.name ? 'active' : '',attrs:{\"to\":(\"/discoverplaylist?cat=\" + (sub.name))}},[_vm._v(_vm._s(sub.name))])],1)}),0)])}),0)]),_c('ul',{staticClass:\"hot-playlist-wrap\"},_vm._l((_vm.hotPlayList),function(item){return _c('li',{key:item.id},[_c('router-link',{class:_vm.page.cat == item.name ? 'active' : '',attrs:{\"to\":(\"/discoverplaylist?cat=\" + (item.name))}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])],1)}),0)]),(_vm.playList.length)?_c('div',{staticClass:\"sheet-list-wrap\"},[_c('ul',{staticClass:\"sheet-list\"},_vm._l((_vm.playList),function(item){return _c('li',{key:item.id},[_c('SongSheetItem',{attrs:{\"songSheetItem\":item}})],1)}),0),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLoading),expression:\"isLoading\"}]},[_vm._v(\"正在加载新数据！\")]),(!_vm.more)?_c('p',[_vm._v(\"我们是有底线的！\")]):_vm._e()]):_c('div',{staticStyle:{\"font-size\":\"24px\",\"font-weight\":\"700\"}},[_vm._v(\" 正在努力加载数据！ \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"discoverplaylist-box\">\r\n    <div class=\"discoverplaylist-wrap\">\r\n      <div class=\"head\">\r\n        <h3>\r\n          {{ page.cat }}\r\n          <a\r\n            href=\"javascript:void(0)\"\r\n            class=\"choose\"\r\n            ref=\"choose\"\r\n            @click=\"categorysIsShow = !categorysIsShow\"\r\n          >\r\n            选择分类\r\n            <i class=\"iconfont icon-xiangxiajiantou\"></i>\r\n          </a>\r\n        </h3>\r\n\r\n        <div class=\"categorys\" v-show=\"categorysIsShow\" ref=\"categorys\">\r\n          <!-- <i class=\"xiangshangjiantou\"></i> -->\r\n          <div class=\"all\">\r\n            <router-link :to=\"`/discoverplaylist?cat=全部`\">\r\n              全部风格\r\n            </router-link>\r\n          </div>\r\n          <div class=\"c-list\">\r\n            <div\r\n              class=\"categorys-wrap\"\r\n              v-for=\"item in playListCatlist\"\r\n              :key=\"item.id\"\r\n            >\r\n              <div class=\"category-item\">\r\n                <i :class=\"item.iconClass\"></i>\r\n                <span>\r\n                  {{ item.name }}\r\n                </span>\r\n              </div>\r\n              <ul class=\"tags-wrap\">\r\n                <li v-for=\"sub in item.subs\" :key=\"sub.name\" class=\"tag-item\">\r\n                  <router-link\r\n                    :to=\"`/discoverplaylist?cat=${sub.name}`\"\r\n                    :class=\"page.cat == sub.name ? 'active' : ''\"\r\n                    >{{ sub.name }}</router-link\r\n                  >\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ul class=\"hot-playlist-wrap\">\r\n          <li v-for=\"item in hotPlayList\" :key=\"item.id\">\r\n            <router-link\r\n              :to=\"`/discoverplaylist?cat=${item.name}`\"\r\n              :class=\"page.cat == item.name ? 'active' : ''\"\r\n            >\r\n              {{ item.name }}\r\n            </router-link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div v-if=\"playList.length\" class=\"sheet-list-wrap\">\r\n        <ul class=\"sheet-list\">\r\n          <li v-for=\"item in playList\" :key=\"item.id\">\r\n            <SongSheetItem :songSheetItem=\"item\"></SongSheetItem>\r\n          </li>\r\n        </ul>\r\n        <p v-show=\"isLoading\">正在加载新数据！</p>\r\n        <p v-if=\"!more\">我们是有底线的！</p>\r\n      </div>\r\n\r\n      <div v-else style=\"font-size: 24px; font-weight: 700\">\r\n        正在努力加载数据！\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SongSheetItem from \"../../components/song/SongSheetItem\";\r\n\r\nimport closeTargetEle from \"../../utils/closeTargetEle\";\r\nimport { sheetApi } from \"@/api\";\r\n\r\nexport default {\r\n  name: \"\",\r\n  components: { SongSheetItem },\r\n  data() {\r\n    return {\r\n      categorysIsShow: false,\r\n      scrollBottom: 0,\r\n      isLoading: false, //是否 加载新数据\r\n      more: true, //是否 有下一页数据\r\n      currentIndex: 1, //当前页数\r\n      page: {\r\n        cat: \"全部\",\r\n        order: \"hot\",\r\n        limit: 20, //数量 最大100\r\n        offset: 0 //偏移量  （页数-1）*数量\r\n      },\r\n      hotPlayList: [], //热门分类\r\n      playListCatlist: [], //全部分类\r\n      playList: [] //歌单\r\n    };\r\n  },\r\n  props: {},\r\n  computed: {},\r\n  watch: {\r\n    isLoading: async function () {\r\n      if (this.isLoading) {\r\n        this.currentIndex += 1;\r\n        this.page.offset = (this.currentIndex - 1) * this.page.limit;\r\n        const res = await sheetApi.getTopPlayList(this.page);\r\n        this.more = res.more;\r\n        this.playList = this.playList.concat(res.playlists);\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    \"$route.query\": {\r\n      async handler() {\r\n        if (Object.keys(this.$route.query).length != 0) {\r\n          console.log(\"进来了\");\r\n          this.page.cat = this.$route.query.cat;\r\n          this.page.offset = 0;\r\n          this.currentIndex = 1;\r\n        }\r\n\r\n        const res = await sheetApi.getTopPlayList(this.page);\r\n        this.playList = res.playlists;\r\n        this.categorysIsShow = false;\r\n      },\r\n      // 深度观察监听\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n    // 监听滚动条\r\n    scrollHandler() {\r\n      //变量scrollTop是滚动条滚动时，距离顶部的距离\r\n      let scrollTop =\r\n        document.documentElement.scrollTop || document.body.scrollTop;\r\n      //变量windowHeight是可视区的高度\r\n      let windowHeight =\r\n        document.documentElement.clientHeight || document.body.clientHeight;\r\n      //变量scrollHeight是滚动条的总高度\r\n      let scrollHeight =\r\n        document.documentElement.scrollHeight || document.body.scrollHeight;\r\n      // console.log(scrollTop,windowHeight,scrollHeight);\r\n      //滚动条距离底部的距离\r\n      let scrollBottom = scrollHeight - scrollTop - windowHeight;\r\n      // console.log(scrollBottom);\r\n      this.scrollBottom = scrollBottom;\r\n      if (this.scrollBottom < 300 && this.more) {\r\n        this.isLoading = true;\r\n      }\r\n    },\r\n    NonTargetIsClicked(e) {\r\n      if (this.categorysIsShow) {\r\n        const target = e.target;\r\n        const showTargetEle = this.$refs.categorys;\r\n        const triggerTargetEle = this.$refs.choose;\r\n        const flag = closeTargetEle(target, showTargetEle, triggerTargetEle);\r\n        if (!flag) {\r\n          this.categorysIsShow = false;\r\n        }\r\n      }\r\n    },\r\n    async initHotPlayList() {\r\n      if (sessionStorage.getItem(\"hotPlayList\")) {\r\n        const hotPlayList = JSON.parse(sessionStorage.getItem(\"hotPlayList\"));\r\n        this.hotPlayList = hotPlayList;\r\n      } else {\r\n        // 获取热门歌单分类\r\n        sheetApi.getHotPlayList().then((res) => {\r\n          this.hotPlayList = res.tags;\r\n          sessionStorage.setItem(\r\n            \"hotPlayList\",\r\n            JSON.stringify(this.hotPlayList)\r\n          );\r\n        });\r\n      }\r\n    },\r\n    async initPlayListCatlist() {\r\n      if (sessionStorage.getItem(\"playListCatlist\")) {\r\n        const playListCatlist = JSON.parse(\r\n          sessionStorage.getItem(\"playListCatlist\")\r\n        );\r\n        this.playListCatlist = playListCatlist;\r\n      } else {\r\n        sheetApi.getPlayListCatlist().then((res) => {\r\n          const categorys = res.categories;\r\n          const sub = res.sub;\r\n          for (let key in categorys) {\r\n            const obj = {};\r\n            const k = parseInt(key);\r\n            obj.id = k;\r\n            obj.name = categorys[key];\r\n\r\n            switch (parseInt(key)) {\r\n              case 0:\r\n                obj.iconClass = \"iconfont icon-duoyuyan\";\r\n                break;\r\n              case 1:\r\n                obj.iconClass = \"iconfont icon-gangqin\";\r\n                break;\r\n              case 2:\r\n                obj.iconClass = \"iconfont icon-kafei\";\r\n                break;\r\n              case 3:\r\n                obj.iconClass = \"iconfont icon-xiaolian\";\r\n                break;\r\n              case 4:\r\n                obj.iconClass = \"iconfont icon-yinle1\";\r\n                break;\r\n            }\r\n            obj.subs = sub.filter((item) => {\r\n              return item.category == key;\r\n            });\r\n            this.playListCatlist.push(obj);\r\n          }\r\n          sessionStorage.setItem(\r\n            \"playListCatlist\",\r\n            JSON.stringify(this.playListCatlist)\r\n          );\r\n        });\r\n      }\r\n    }\r\n  },\r\n  beforeCreated() {},\r\n  async created() {\r\n    document.addEventListener(\"click\", this.NonTargetIsClicked);\r\n    window.addEventListener(\"scroll\", this.scrollHandler);\r\n\r\n    this.initHotPlayList();\r\n    this.initPlayListCatlist();\r\n  },\r\n  beforeMount() {},\r\n  mounted() {},\r\n  beforeUpdate() {},\r\n  updated() {},\r\n  beforeDestroy() {\r\n    // console.log(\"NonTargetIsClicked解除\");\r\n    document.removeEventListener(\"click\", this.NonTargetIsClicked);\r\n    window.removeEventListener(\"scroll\", this.scrollHandler);\r\n  },\r\n  destroyed() {},\r\n  //被keep-alive缓存的组件激活时调用\r\n  activated() {},\r\n  deactivated() {}\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.discoverplaylist-wrap {\r\n  width: 900px;\r\n  margin: 0 auto;\r\n  padding: 40px;\r\n  background-color: rgb(255, 255, 255);\r\n  .head {\r\n    position: relative;\r\n    height: 42px;\r\n    line-height: 42px;\r\n    border-bottom: 2px solid rgb(194, 12, 12);\r\n    h3 {\r\n      float: left;\r\n      font-size: 24px;\r\n      font-weight: 700;\r\n      a {\r\n        position: relative;\r\n        top: -5px;\r\n        display: inline-block;\r\n        font-size: 14px;\r\n        width: 84px;\r\n        height: 32px;\r\n        line-height: 32px;\r\n        color: rgb(12, 115, 194);\r\n        background-color: rgb(254, 254, 254);\r\n        border: 1px solid rgba($color: #000000, $alpha: 0.2);\r\n        border-radius: 5px;\r\n        text-align: center;\r\n      }\r\n      i {\r\n        font-size: 12px;\r\n      }\r\n    }\r\n    .hot-playlist-wrap {\r\n      float: right;\r\n      display: flex;\r\n      a {\r\n        display: inline-block;\r\n        height: 30px;\r\n        line-height: 30px;\r\n        margin: 0 6px;\r\n        color: #666;\r\n        &:hover {\r\n          color: #333;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .sheet-list {\r\n    margin-top: 20px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    li {\r\n      margin-left: 20px;\r\n    }\r\n  }\r\n  p {\r\n    font-size: 24px;\r\n    font-weight: 700;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n.categorys {\r\n  .xiangshangjiantou {\r\n    position: absolute;\r\n    top: -13px;\r\n    left: 130px;\r\n    display: inline-block;\r\n    width: 0;\r\n    height: 0;\r\n    border-bottom: 12px solid #999;\r\n    border-right: 12px solid transparent;\r\n    border-left: 12px solid transparent;\r\n  }\r\n  position: absolute;\r\n  top: 48px;\r\n  width: 720px;\r\n  background-color: white;\r\n  border: 1px solid rgba($color: #000000, $alpha: 0.2);\r\n  border-radius: 6px;\r\n  box-shadow: 0 8px 24px 0 rgba(0, 0, 0, 0.2);\r\n  z-index: 5;\r\n  a {\r\n    display: inline-block;\r\n    text-align: center;\r\n  }\r\n  .all {\r\n    height: 48px;\r\n    line-height: 48px;\r\n    border-bottom: 1px solid rgba($color: #000000, $alpha: 0.2);\r\n    a {\r\n      width: 76px;\r\n      height: 24px;\r\n      margin-left: 24px;\r\n      padding: 3px;\r\n      line-height: 24px;\r\n      border: 1px solid rgba($color: #000000, $alpha: 0.2);\r\n      border-radius: 6px;\r\n    }\r\n  }\r\n  .c-list {\r\n    .categorys-wrap {\r\n      display: flex;\r\n      height: 68px;\r\n      align-content: center;\r\n      .category-item {\r\n        flex-grow: 1;\r\n        padding: 8px;\r\n        text-align: center;\r\n        font-weight: 600;\r\n        border-right: 1px solid rgba($color: #000000, $alpha: 0.2);\r\n      }\r\n\r\n      .tags-wrap {\r\n        height: 60px;\r\n        width: 624px;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        line-height: 60px;\r\n        align-content: center;\r\n        li {\r\n          height: 30px;\r\n          line-height: 30px;\r\n          margin-left: 6px;\r\n          margin-right: 12px;\r\n          box-sizing: border-box;\r\n          a {\r\n            color: #666;\r\n            min-width: 36px;\r\n            height: 24px;\r\n            // line-height: 24px;\r\n            &:hover {\r\n              color: #000;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.active {\r\n  color: rgb(194, 12, 12) !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./discoverPlayList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./discoverPlayList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./discoverPlayList.vue?vue&type=template&id=f6bd99d8&scoped=true&\"\nimport script from \"./discoverPlayList.vue?vue&type=script&lang=js&\"\nexport * from \"./discoverPlayList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./discoverPlayList.vue?vue&type=style&index=0&id=f6bd99d8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f6bd99d8\",\n  null\n  \n)\n\nexport default component.exports","export default function (target, showTargetEle, triggerTargetEle) {\r\n  // target 当前单击的目标元素\r\n  // showTargetEle 要隐藏或显示的目标元素\r\n  // triggerTargetEle触发显示showTargetEle的元素\r\n\r\n  // 要隐藏或显示的目标元素 是否包含了单击的元素 或者 是否单击了触发显示元素的元素\r\n  // 包含了返回true继续显示 不包含返回false隐藏\r\n  return showTargetEle.contains(target) || triggerTargetEle.contains(target);\r\n}\r\n"],"sourceRoot":""}