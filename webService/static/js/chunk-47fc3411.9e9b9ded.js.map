{"version":3,"sources":["webpack:///./src/views/system/login.vue?dc70","webpack:///./src/assets/img/qr_guide.png","webpack:///./src/assets/img/qr-login.png","webpack:///./src/views/system/login.vue?7a7b","webpack:///src/views/system/login.vue","webpack:///./src/views/system/login.vue?ac23","webpack:///./src/views/system/login.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","loginModel","expression","_v","ref","attrs","loginForm","loginFormRules","staticStyle","model","callback","$$v","$set","slot","on","$event","handleSubmit","_m","qr","base64","preventDefault","checkQRLogin","apply","arguments","_e","checkPhoneLogin","staticRenderFns","components","data","Error","phone","password","captcha","unikey","isExpire","fromPath","props","computed","watch","beforeRouteEnter","next","methods","checkQR","console","log","QRTimer","setInterval","$refs","validate","valid","message","type","a","res","beforeCreated","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","clearInterval","destroyed","activated","deactivated","component"],"mappings":"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","file":"js/chunk-47fc3411.9e9b9ded.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=6dd573d6&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/qr_guide.fe695c03.png\";","module.exports = __webpack_public_path__ + \"img/qr-login.bf6856b7.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-box\"},[_c('div',{staticClass:\"login-wrap\"},[_c('div',{staticClass:\"lg\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loginModel == 1),expression:\"loginModel == 1\"}],staticClass:\"phone-login-wrap\"},[_c('div',{staticClass:\"login-title\"},[_vm._v(\"用户登入\")]),_c('div',{staticClass:\"login-form\"},[_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginFormRules}},[_c('el-form-item',{attrs:{\"prop\":\"phone\"}},[_c('el-input',{staticStyle:{\"height\":\"48px\",\"line-height\":\"48px\"},attrs:{\"type\":\"text\",\"placeholder\":\"请输入登入手机号\",\"size\":\"large\"},model:{value:(_vm.loginForm.phone),callback:function ($$v) {_vm.$set(_vm.loginForm, \"phone\", $$v)},expression:\"loginForm.phone\"}},[_c('i',{staticClass:\"iconfont icon-yonghu\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{staticStyle:{\"height\":\"48px\",\"line-height\":\"48px\"},attrs:{\"type\":\"password\",\"show-password\":\"\",\"placeholder\":\"请输入登入密码\",\"size\":\"large\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}},[_c('i',{staticClass:\"iconfont icon-shuyi_guansuo\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"margin-top\":\"8px\",\"width\":\"100%\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSubmit('loginForm')}}},[_vm._v(\"登录\")])],1)],1)],1),_c('div',{staticClass:\"item-list\"},[_c('a',{attrs:{\"href\":\"/#\"}},[_vm._v(\"注册用户\")]),_c('a',[_vm._v(\"忘记密码\")]),_c('a',[_vm._v(\"登入遇到问题\")]),_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"主页\")])],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loginModel == 2),expression:\"loginModel == 2\"}],staticClass:\"qr-login-wrap\"},[_vm._m(0),_c('div',{staticClass:\"qr-wrap\"},[_c('div',{staticClass:\"t\"},[_vm._v(\"扫码登入\")]),_c('div',{staticClass:\"qr-img\"},[_c('img',{attrs:{\"src\":_vm.qr.base64,\"alt\":\"\"}}),(_vm.qr.isExpire)?_c('div',{staticClass:\"qr-isExpire\"},[_c('div',[_c('span',[_vm._v(\" 二维码已经失效 \")]),_c('br'),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.checkQRLogin.apply(null, arguments)}}},[_vm._v(\"点击刷新\")])])]):_vm._e()]),_vm._m(1)]),_c('div',{staticClass:\"update-btn\"},[_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.checkPhoneLogin.apply(null, arguments)}}},[_vm._v(\"选择其他登入方式\")])])]),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loginModel == 1),expression:\"loginModel == 1\"}],staticClass:\"qr-login\",attrs:{\"src\":require(\"@/assets/img/qr-login.png\"),\"alt\":\"二维码登入\"},on:{\"click\":_vm.checkQRLogin}})])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"qr_guide-wrap\"},[_c('img',{attrs:{\"src\":require(\"@/assets/img/qr_guide.png\"),\"alt\":\"\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"b\"},[_vm._v(\" 使用\"),_c('a',{attrs:{\"href\":\"https://music.163.com/#/download\"}},[_vm._v(\"网易云音乐APP\")]),_vm._v(\"扫码登入 \")])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login-box\">\r\n    <div class=\"login-wrap\">\r\n      <div class=\"lg\">\r\n        <div class=\"phone-login-wrap\" v-show=\"loginModel == 1\">\r\n          <div class=\"login-title\">用户登入</div>\r\n          <div class=\"login-form\">\r\n            <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginFormRules\">\r\n              <el-form-item prop=\"phone\">\r\n                <el-input\r\n                  type=\"text\"\r\n                  v-model=\"loginForm.phone\"\r\n                  placeholder=\"请输入登入手机号\"\r\n                  size=\"large\"\r\n                  style=\"height: 48px; line-height: 48px\"\r\n                >\r\n                  <i slot=\"prefix\" class=\"iconfont icon-yonghu\"></i>\r\n                </el-input>\r\n              </el-form-item>\r\n              <el-form-item prop=\"password\">\r\n                <el-input\r\n                  type=\"password\"\r\n                  v-model=\"loginForm.password\"\r\n                  show-password\r\n                  placeholder=\"请输入登入密码\"\r\n                  size=\"large\"\r\n                  style=\"height: 48px; line-height: 48px\"\r\n                >\r\n                  <i slot=\"prefix\" class=\"iconfont icon-shuyi_guansuo\"></i>\r\n                </el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button\r\n                  type=\"primary\"\r\n                  @click=\"handleSubmit('loginForm')\"\r\n                  style=\"margin-top: 8px; width: 100%\"\r\n                  >登录</el-button\r\n                >\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n          <div class=\"item-list\">\r\n            <a href=\"/#\">注册用户</a>\r\n            <a>忘记密码</a>\r\n            <a>登入遇到问题</a>\r\n            <router-link to=\"/\">主页</router-link>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"qr-login-wrap\" v-show=\"loginModel == 2\">\r\n          <div class=\"qr_guide-wrap\">\r\n            <img src=\"@/assets/img/qr_guide.png\" alt=\"\" />\r\n          </div>\r\n          <div class=\"qr-wrap\">\r\n            <div class=\"t\">扫码登入</div>\r\n            <div class=\"qr-img\">\r\n              <img :src=\"qr.base64\" alt=\"\" />\r\n              <div class=\"qr-isExpire\" v-if=\"qr.isExpire\">\r\n                <div>\r\n                  <span> 二维码已经失效 </span>\r\n                  <br />\r\n                  <a href=\"#\" @click.prevent=\"checkQRLogin\">点击刷新</a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"b\">\r\n              使用<a href=\"https://music.163.com/#/download\">网易云音乐APP</a\r\n              >扫码登入\r\n            </div>\r\n          </div>\r\n          <div class=\"update-btn\">\r\n            <a href=\"#\" @click.prevent=\"checkPhoneLogin\">选择其他登入方式</a>\r\n          </div>\r\n        </div>\r\n\r\n        <img\r\n          src=\"@/assets/img/qr-login.png\"\r\n          alt=\"二维码登入\"\r\n          class=\"qr-login\"\r\n          v-show=\"loginModel == 1\"\r\n          @click=\"checkQRLogin\"\r\n        />\r\n      </div>\r\n\r\n      <!-- <button @click=\"a\">登入状态</button>\r\n        <div>{{fromPath}}</div> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from \"vuex\";\r\nimport { systemApi, userApi } from \"@/api\";\r\nexport default {\r\n  name: \"Login\",\r\n  components: {},\r\n  data() {\r\n    const validatePhone = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请填写登入手机号\"));\r\n      } else if (!/^1[3456789]\\d{9}$/.test(value)) {\r\n        callback(new Error(\"您输入的手机号格式错误\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    const validatePassword = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请填写登入密码\"));\r\n      } else if (value.length < 8) {\r\n        callback(new Error(\"密码长度不能小于8位\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      loginModel: 1, //登入模式 1手机号 2二维码\r\n      loginForm: {\r\n        phone: \"13142211138\",\r\n        password: \"\",\r\n        captcha: \"\"\r\n      },\r\n      loginFormRules: {\r\n        phone: [{ validator: validatePhone, required: true, trigger: \"blur\" }],\r\n        password: [\r\n          { validator: validatePassword, required: true, trigger: \"blur\" }\r\n        ]\r\n      },\r\n      qr: {\r\n        unikey: \"\",\r\n        base64: \"\", //二维码base64\r\n        isExpire: true\r\n      },\r\n      fromPath: \"\" //从哪个路由跳转过来\r\n    };\r\n  },\r\n  props: {},\r\n  computed: {},\r\n  watch: {},\r\n  beforeRouteEnter(to, from, next) {\r\n    next((vm) => {});\r\n  },\r\n  methods: {\r\n    ...mapMutations(\"UserModule\", [\"updateUserInfo\", \"updateUserState\"]),\r\n    //切换方式为二维码登入\r\n    async checkQRLogin() {\r\n      const r = await this.initQR();\r\n      if (r) {\r\n        this.loginModel = 2;\r\n        this.qr.isExpire = false;\r\n        //每隔2秒监听一次二维码 轮询是否被扫描\r\n        this.checkQR(2000);\r\n      } else {\r\n        console.log(\"二维码初始化错误\");\r\n      }\r\n    },\r\n    //切换方式为手机号码登入\r\n    async checkPhoneLogin() {\r\n      if (this.QRTimer) {\r\n        clearInterval(this.QRTimer);\r\n      }\r\n      this.loginModel = 1;\r\n    },\r\n    //监听二维码是否被扫描\r\n    checkQR(t) {\r\n      console.log(\"等待用户扫码！\");\r\n      this.QRTimer = setInterval(() => {\r\n        systemApi.checkQRState(this.qr.unikey).then(async (res) => {\r\n          console.log(res);\r\n          //二维码被扫了 授权中  一直不授权的话 超时也会过期\r\n          // if(res.code == 802){\r\n          //     //可以拿到avatarUrl和nickname\r\n          //     console.log(res.avatarUrl);\r\n          //     console.log(res.nickname);\r\n          //     return;\r\n          // }\r\n          // 确定授权 登入成功\r\n          if (res.code == 803) {\r\n            //可以拿登入后的cookie\r\n            console.log(res.cookie);\r\n            const r = await userApi.getUserAccountInfo(res.cookie);\r\n            this.updateUserInfo({ profile: r.profile });\r\n            this.updateUserState({\r\n              userState: {\r\n                isLogin: true,\r\n                cookie: res.cookie\r\n              }\r\n            });\r\n            this.$router.push(\"/\");\r\n            return;\r\n          }\r\n          //过一定时间没扫 或者 扫过了 二维码就会过期 code返回800\r\n          if (res.code == 800) {\r\n            this.qr.isExpire = true;\r\n            clearInterval(this.QRTimer);\r\n            return;\r\n          }\r\n        });\r\n      }, t);\r\n    },\r\n    //获取二维码\r\n    async initQR() {\r\n      return new Promise((resolve, reject) => {\r\n        //获得二维码key\r\n        systemApi\r\n          .getQRKey()\r\n          .then((res) => {\r\n            this.qr.unikey = res.data.unikey;\r\n            return systemApi.createQR(res.data.unikey);\r\n          })\r\n          .then((res) => {\r\n            //五分钟过期\r\n            this.qr.base64 = res.data.qrimg;\r\n            resolve(true);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            reject(false);\r\n          });\r\n      });\r\n    },\r\n    handleSubmit(name) {\r\n      this.$refs[name].validate((valid) => {\r\n        if (valid) {\r\n          systemApi\r\n            .login(this.loginForm)\r\n            .then((res) => {\r\n              console.log(res);\r\n              if (res.code == 200) {\r\n                this.updateUserInfo({ profile: res.profile });\r\n                this.updateUserState({\r\n                  userState: {\r\n                    isLogin: true,\r\n                    cookie: res.cookie\r\n                  }\r\n                });\r\n                this.$router.push(\"/\");\r\n              } else {\r\n                console.log(res.code);\r\n                this.$message({\r\n                  message: \"密码错误！\",\r\n                  type: \"error\"\r\n                });\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n              this.$message({\r\n                message: \"账号不存在！\",\r\n                type: \"error\"\r\n              });\r\n            });\r\n          // this.$router.replace('/');\r\n        } else {\r\n          this.$message({\r\n            message: \"请输入正确格式的账号与密码！\",\r\n            type: \"error\"\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    a() {\r\n      systemApi.getLoginStatus().then((res) => {\r\n        console.log(\"登入状态:\", res);\r\n      });\r\n    }\r\n  },\r\n  beforeCreated() {},\r\n  created() {},\r\n  beforeMount() {},\r\n  mounted() {},\r\n  beforeUpdate() {},\r\n  updated() {},\r\n  beforeDestroy() {\r\n    if (this.QRTimer) {\r\n      clearInterval(this.QRTimer);\r\n    }\r\n  },\r\n  destroyed() {},\r\n  //被keep-alive缓存的组件激活时调用\r\n  activated() {},\r\n  deactivated() {}\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.login-wrap {\r\n  width: 980px;\r\n  height: 700px;\r\n  margin: 0 auto;\r\n  background-color: white;\r\n  box-sizing: border-box;\r\n  padding: 60px;\r\n  .lg {\r\n    width: 360px;\r\n    margin: 0 auto;\r\n    border-radius: 10px;\r\n    background-color: rgba($color: #000000, $alpha: 0.1);\r\n    padding: 30px;\r\n    position: relative;\r\n    .phone-login-wrap {\r\n      .login-title {\r\n        height: 45px;\r\n        line-height: 45px;\r\n        color: rgb(111, 104, 223);\r\n        text-align: center;\r\n        padding: 15px;\r\n        font-size: 30px;\r\n        font-weight: 800;\r\n        box-sizing: content-box;\r\n      }\r\n      .item-list {\r\n        padding: 10px 0;\r\n      }\r\n      .item-list a {\r\n        color: #3c8dbc;\r\n        font-size: 14px;\r\n        text-decoration: none;\r\n        font-weight: 800;\r\n        letter-spacing: 1px;\r\n        margin-right: 8px;\r\n      }\r\n    }\r\n    .qr-login-wrap {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      flex-wrap: wrap;\r\n      .qr_guide-wrap {\r\n        img {\r\n          width: 125px;\r\n          height: 220px;\r\n        }\r\n      }\r\n      .qr-wrap {\r\n        .t {\r\n          font-size: 18px;\r\n          text-align: center;\r\n        }\r\n        .b {\r\n          font-size: 14px;\r\n          text-align: center;\r\n          a {\r\n            color: #0c73c2;\r\n          }\r\n        }\r\n        .qr-img {\r\n          text-align: center;\r\n          position: relative;\r\n          img {\r\n            width: 160px;\r\n            height: 160px;\r\n            margin: 8px 0;\r\n          }\r\n          .qr-isExpire {\r\n            position: absolute;\r\n            background-color: rgba(229, 229, 229, 0.9);\r\n            color: #333;\r\n            top: 0;\r\n            bottom: 0;\r\n            left: 0;\r\n            right: 0;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            font-size: 14px;\r\n            font-weight: 600;\r\n            a {\r\n              display: inline-block;\r\n              width: 64px;\r\n              height: 24px;\r\n              line-height: 24px;\r\n              margin-top: 6px;\r\n              text-align: center;\r\n              border-radius: 6px;\r\n              background-color: rgb(121, 210, 121);\r\n              color: rgb(245, 245, 245);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .update-btn {\r\n        width: 100%;\r\n        height: 32px;\r\n        line-height: 32px;\r\n        margin-top: 10px;\r\n        text-align: center;\r\n        a {\r\n          display: inline-block;\r\n          width: 118px;\r\n          height: 28px;\r\n          line-height: 28px;\r\n          border: 1px solid #979797;\r\n          border-radius: 15px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .qr-login {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      width: 60px;\r\n      height: 60px;\r\n      border-top-right-radius: 10px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=6dd573d6&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=6dd573d6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6dd573d6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}