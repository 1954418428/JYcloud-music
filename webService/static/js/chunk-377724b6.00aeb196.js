(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-377724b6"],{"092d":function(t,e,n){},"09af":function(t,e,n){t.exports=n.p+"img/用户.a819ba08.png"},"12b5":function(t,e,n){},"26af":function(t,e,n){"use strict";n("6078")},"5a0b":function(t,e,n){"use strict";n("092d")},6078:function(t,e,n){},6804:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"songplaying-box"},[n("div",{staticClass:"songplaying-wrap"},[n("div",{staticClass:"left-wrap"},[n("div",{staticClass:"PlayingSheet-wrap"},[n("PlayingSheet")],1)]),n("div",{staticClass:"right-wrap"},[n("div",{staticClass:"Lyric-wrap"},[n("Lyric")],1),n("div",{staticClass:"MusicPlayerTools-wrap"},[n("MusicPlayerTools")],1)]),n("div",{staticClass:"music-comment"},[n("div",{staticClass:"comment-head"},[n("h3",[t._v("评论")]),n("span",[t._v(" 共"+t._s(t.page.total)+"条评论 ")])]),n("div",{staticClass:"reply-wrap"},[n("Replay",{on:{emitAddComment:t.addComment}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.hotComments.length,expression:"hotComments.length"}]},[n("h4",[t._v("热门评论")]),n("ul",t._l(t.hotComments,(function(t){return n("li",{key:t.commentId},[n("Comment",{attrs:{comment:t}})],1)})),0)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.comments.length,expression:"comments.length"}]},[n("h4",[t._v("最新100条评论")]),n("ul",t._l(t.comments,(function(t){return n("li",{key:t.commentId},[n("Comment",{attrs:{comment:t}})],1)})),0)])])])])},s=[],a=n("5530"),i=n("7ff8"),c=n("d3c1"),m=n("8ea4"),r=n("a78c"),u=n("c109e"),d=n("2f62"),l=n("365c"),f={name:"",components:{PlayingSheet:c["a"],MusicPlayerTools:i["a"],Lyric:m["a"],Replay:r["a"],Comment:u["a"]},data:function(){return{page:{currentIndex:1,limit:100,offset:0,total:0},hotComments:[],comments:[]}},props:{},computed:Object(a["a"])({},Object(d["d"])("PlayerModule",["audio"])),watch:{"$route.query.id":{handler:function(){var t=this;this.initCommentQueryData({t:1,type:0,id:this.$route.query.id}),this.hotComments=[],this.comments=[],l["e"].getSongCommentList({id:this.$route.query.id,limit:100,offset:0}).then((function(e){t.page.total=e.total,t.hotComments=e.hotComments,t.comments=e.comments}))},immediate:!0},"audio.id":{handler:function(){this.$router.push("/songplaying?id=".concat(this.audio.id))},immediate:!0}},methods:Object(a["a"])(Object(a["a"])({},Object(d["c"])("CommentModule",["initCommentQueryData"])),{},{addComment:function(t){console.log("comment",t),this.page.total+=1,this.comments.unshift(t)}}),beforeCreated:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},deactivated:function(){}},p=f,h=(n("26af"),n("2877")),v=Object(h["a"])(p,o,s,!1,null,"52964555",null);e["default"]=v.exports},7382:function(t,e,n){"use strict";n("12b5")},a78c:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"replyBox",staticClass:"reply-item-box",attrs:{id:"reply-box"}},[o("div",{staticStyle:{"text-align":"center","margin-right":"8px"}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:{src:t.userInfo.avatarUrl,error:n("09af"),loading:n("09af")},expression:"{\n        src: userInfo.avatarUrl,\n        error: require('@/assets/img/用户.png'),\n        loading: require('@/assets/img/用户.png')\n      }"}],staticClass:"user-img",style:{height:t.size+"px",width:t.size+"px"},attrs:{alt:""}}),o("div",{staticClass:"user-name"},[t._v(" "+t._s(t.userInfo.nickname||"用户名")+" ")])]),o("div",{staticStyle:{width:"100%"}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"input-conntent",attrs:{rows:"3",placeholder:t.commentQueryData.msg},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),o("span",{staticClass:"btn",on:{click:t.sendComment}},[t._v(" 发表评论 ")]),o("span",{directives:[{name:"show",rawName:"v-show",value:2==t.commentQueryData.t,expression:"commentQueryData.t == 2"}],staticClass:"btn",staticStyle:{"margin-left":"10px","background-color":"#999"},on:{click:t.deleteCommentId}},[t._v(" 取消回复 ")])])])},s=[],a=n("5530"),i=n("2f62"),c=n("365c"),m={name:"ReplyItem",components:{},data:function(){return{}},props:{size:{default:60}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(i["d"])("UserModule",["userState","userInfo"])),Object(i["d"])("CommentModule",["commentQueryData"])),{},{content:{get:function(){return this.$store.state.CommentModule.commentQueryData.content},set:function(t){this.updateContent(t)}}}),watch:{},methods:Object(a["a"])(Object(a["a"])({},Object(i["c"])("CommentModule",["updateContent","deleteCommentId"])),{},{sendComment:function(){var t=this;this.userState.isLogin?this.commentQueryData.content?c["f"].comment({t:this.commentQueryData.t,type:this.commentQueryData.type,id:this.commentQueryData.id,content:this.commentQueryData.content,commentId:this.commentQueryData.commentId}).then((function(e){if(console.log(e),200==e.code){t.$message({message:"评论成功!",type:"success"});var n=[];if(e.comment.beRepliedUser&&e.comment.beRepliedUser.userId){var o={};o.beRepliedCommentId=t.commentQueryData.beRepliedCommentId,o.content=t.commentQueryData.rc,o.user=e.comment.beRepliedUser,n.push(o)}var s=e.comment.commentId,a=e.comment.content,i=e.comment.time,c=e.comment.user,m={beReplied:n,commentId:s,content:a,liked:!1,likedCount:0,time:i,user:c};t.$emit("emitAddComment",m),t.deleteCommentId()}else t.$message({message:"评论太频繁,请稍后再评论!",type:"warning"})})):this.$message({message:"请输入评论内容",type:"warning"}):this.$confirm("您未登入！是否跳转登入界面？","提示").then((function(){t.$router.push({path:"/login"})})).catch((function(){}))},move:function(){var t=this.$refs.replyBox;window.scrollTo(0,t.offsetTop-200)}}),beforeCreated:function(){},created:function(){this.$eventBus.$on("move",this.move)},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},deactivated:function(){}},r=m,u=(n("5a0b"),n("2877")),d=Object(u["a"])(r,o,s,!1,null,"a14e7ae8",null);e["a"]=d.exports},c109e:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"comment-item-box",style:t.comment.commentId?"min-height: 80px;":""},[t.comment.commentId?n("img",{staticClass:"user-img",attrs:{src:t.comment.user.avatarUrl,alt:""}}):t._e(),n("div",{staticClass:"right-box",style:t.comment.commentId?"border-bottom: 1px dashed  rgb(0, 0, 0,0.5);":""},[n("router-link",{staticClass:"user-name",attrs:{to:"/user/home?id="+t.comment.user.userId}},[t._v(t._s(t.comment.user.nickname))]),n("div",{staticClass:"comment-content"},[t._v(" "+t._s(t.comment.content)+" ")]),t.comment.beReplied&&0!=t.comment.beReplied.length?n("div",[n("Comment",{staticStyle:{"background-color":"rgb(240, 240, 240)",padding:"0 4px"},attrs:{comment:t.comment.beReplied[0]}})],1):t._e(),t.comment.commentId?n("div",{staticClass:"right-bottom-box"},[t.comment.time?n("span",{staticClass:"comment-time"},[t._v(t._s(t.moment(parseInt(t.comment.time)).format("YYYY/MM/DD HH:mm:ss")))]):t._e(),n("span",{staticClass:"comment-liked-count"},[n("i",{staticClass:"iconfont icon-dianzan"}),t._v(t._s(t.comment.likedCount))]),n("span",{staticStyle:{cursor:"pointer"},on:{click:t.replyIsChecked}},[t._v("回复")])]):t._e()],1)])])},s=[],a=n("5530"),i=n("2f62"),c={name:"Comment",components:{},data:function(){return{}},props:{comment:{type:Object,required:!0}},computed:Object(a["a"])({},Object(i["d"])("UserModule",["userState"])),watch:{},methods:Object(a["a"])(Object(a["a"])({},Object(i["c"])("CommentModule",["updateCommentId"])),{},{replyIsChecked:function(){var t=this;this.userState.isLogin?(this.updateCommentId({commentId:this.comment.commentId,nickname:this.comment.user.nickname,rc:this.comment.content,beRepliedCommentId:this.comment.beReplied.length?this.comment.beReplied[0].beRepliedCommentId:0}),this.$eventBus.$emit("move")):this.$confirm("您未登入！是否跳转登入界面？","提示",{customClass:"b"}).then((function(){t.$router.push({path:"/login"})})).catch((function(){}))}}),beforeCreated:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},deactivated:function(){}},m=c,r=(n("7382"),n("2877")),u=Object(r["a"])(m,o,s,!1,null,"de61f676",null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-377724b6.00aeb196.js.map